{% extends "base.html" %}

{% block title %}{% if client %}Editar Cliente{% else %}Novo Cliente{% endif %} - SIGEC{% endblock %}

{% block content %}
<!-- Header da página -->
<div class="page-header">
    <div class="row align-items-center">
        <div class="col-md-8">
            <h1>
                <i class="bi bi-{% if client %}pencil-square{% else %}person-plus{% endif %}" style="color: var(--control-primary);"></i>
                {% if client %}Editar Cliente{% else %}Novo Cliente{% endif %}
            </h1>
            <p class="mb-0">
                {% if client %}
                    Atualize as informações do cliente <strong>{{ client.nomeEmpresa }}</strong>
                {% else %}
                    SIGEC - Sistema de Gestão de Empresas Control - Cadastro de novo cliente
                {% endif %}
            </p>
        </div>
        <div class="col-md-4 text-end">
            <a href="/" class="btn btn-secondary">
                <i class="bi bi-arrow-left"></i>
                Voltar ao Dashboard
            </a>
        </div>
    </div>
</div>

<form method="POST" action="/client" class="needs-validation" novalidate id="clientForm">
    {% if client %}
        <input type="hidden" name="id" value="{{ client.id }}">
    {% endif %}
    
    <!-- Bloco 1: Informações da Pessoa Física / Jurídica -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">
                <i class="bi bi-building me-2" style="color: var(--control-primary);"></i>
                Bloco 1 - Informações da Pessoa Física / Jurídica
            </h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="nomeEmpresa" class="form-label">
                        <i class="bi bi-building me-1"></i>Nome da Empresa 
                        <span class="text-danger">*</span>
                    </label>
                    <input type="text" class="form-control" id="nomeEmpresa" name="nomeEmpresa" 
                           value="{{ client.nomeEmpresa if client else '' }}" required>
                    <div class="invalid-feedback">
                        Por favor, informe o nome da empresa.
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <label for="razaoSocialReceita" class="form-label">
                        <i class="bi bi-file-text me-1"></i>Razão Social (Receita)
                        <span class="text-danger">*</span>
                    </label>
                    <input type="text" class="form-control" id="razaoSocialReceita" name="razaoSocialReceita"
                           value="{{ client.razaoSocialReceita if client else '' }}" required>
                    <div class="invalid-feedback">
                        Por favor, informe a razão social.
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <label for="nomeFantasiaReceita" class="form-label">
                        <i class="bi bi-shop me-1"></i>Nome Fantasia (Receita)
                        <span class="text-danger">*</span>
                    </label>
                    <input type="text" class="form-control" id="nomeFantasiaReceita" name="nomeFantasiaReceita"
                           value="{{ client.nomeFantasiaReceita if client else '' }}" required>
                    <div class="invalid-feedback">
                        Por favor, informe o nome fantasia.
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <label for="cpfCnpj" class="form-label">
                        <i class="bi bi-card-text me-1"></i>CPF/CNPJ
                        <span class="text-danger">*</span>
                    </label>
                    <input type="text" class="form-control" id="cnpj" name="cnpj"
                           value="{{ client.cnpj if client else '' }}" 
                           placeholder="00.000.000/0001-00" required>
                    <div class="invalid-feedback">
                        Por favor, informe o CPF ou CNPJ.
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <label for="perfil" class="form-label">
                        <i class="bi bi-star me-1"></i>Perfil do Cliente
                        <span class="text-danger">*</span>
                    </label>
                    <select class="form-select" id="perfil" name="perfil" required>
                        <option value="">Selecione um perfil</option>
                        <option value="A" {% if client and client.perfil == 'A' %}selected{% endif %}>Escolha A</option>
                        <option value="B" {% if client and client.perfil == 'B' %}selected{% endif %}>Escolha B</option>
                        <option value="C" {% if client and client.perfil == 'C' %}selected{% endif %}>Escolha C</option>
                        <option value="D" {% if client and client.perfil == 'D' %}selected{% endif %}>Escolha D</option>
                    </select>
                    <div class="invalid-feedback">
                        Por favor, selecione um perfil.
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <label for="inscEst" class="form-label">
                        <i class="bi bi-card-list me-1"></i>Inscrição Estadual
                        <span class="text-danger">*</span>
                    </label>
                    <input type="text" class="form-control" id="inscEst" name="inscEst"
                           value="{{ client.inscEst if client else '' }}" required>
                    <div class="invalid-feedback">
                        Por favor, informe a inscrição estadual.
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <label for="inscMun" class="form-label">
                        <i class="bi bi-geo-alt me-1"></i>Inscrição Municipal
                        <span class="text-danger">*</span>
                    </label>
                    <input type="text" class="form-control" id="inscMun" name="inscMun"
                           value="{{ client.inscMun if client else '' }}" required>
                    <div class="invalid-feedback">
                        Por favor, informe a inscrição municipal.
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <label for="estado" class="form-label">
                        <i class="bi bi-map me-1"></i>Estado
                        <span class="text-danger">*</span>
                    </label>
                    <select class="form-select" id="estado" name="estado" required>
                        <option value="">Selecione o estado</option>
                        <option value="AC" {% if client and client.estado == 'AC' %}selected{% endif %}>Acre</option>
                        <option value="AL" {% if client and client.estado == 'AL' %}selected{% endif %}>Alagoas</option>
                        <option value="AP" {% if client and client.estado == 'AP' %}selected{% endif %}>Amapá</option>
                        <option value="AM" {% if client and client.estado == 'AM' %}selected{% endif %}>Amazonas</option>
                        <option value="BA" {% if client and client.estado == 'BA' %}selected{% endif %}>Bahia</option>
                        <option value="CE" {% if client and client.estado == 'CE' %}selected{% endif %}>Ceará</option>
                        <option value="DF" {% if client and client.estado == 'DF' %}selected{% endif %}>Distrito Federal</option>
                        <option value="ES" {% if client and client.estado == 'ES' %}selected{% endif %}>Espírito Santo</option>
                        <option value="GO" {% if client and client.estado == 'GO' %}selected{% endif %}>Goiás</option>
                        <option value="MA" {% if client and client.estado == 'MA' %}selected{% endif %}>Maranhão</option>
                        <option value="MT" {% if client and client.estado == 'MT' %}selected{% endif %}>Mato Grosso</option>
                        <option value="MS" {% if client and client.estado == 'MS' %}selected{% endif %}>Mato Grosso do Sul</option>
                        <option value="MG" {% if client and client.estado == 'MG' %}selected{% endif %}>Minas Gerais</option>
                        <option value="PA" {% if client and client.estado == 'PA' %}selected{% endif %}>Pará</option>
                        <option value="PB" {% if client and client.estado == 'PB' %}selected{% endif %}>Paraíba</option>
                        <option value="PR" {% if client and client.estado == 'PR' %}selected{% endif %}>Paraná</option>
                        <option value="PE" {% if client and client.estado == 'PE' %}selected{% endif %}>Pernambuco</option>
                        <option value="PI" {% if client and client.estado == 'PI' %}selected{% endif %}>Piauí</option>
                        <option value="RJ" {% if client and client.estado == 'RJ' %}selected{% endif %}>Rio de Janeiro</option>
                        <option value="RN" {% if client and client.estado == 'RN' %}selected{% endif %}>Rio Grande do Norte</option>
                        <option value="RS" {% if client and client.estado == 'RS' %}selected{% endif %}>Rio Grande do Sul</option>
                        <option value="RO" {% if client and client.estado == 'RO' %}selected{% endif %}>Rondônia</option>
                        <option value="RR" {% if client and client.estado == 'RR' %}selected{% endif %}>Roraima</option>
                        <option value="SC" {% if client and client.estado == 'SC' %}selected{% endif %}>Santa Catarina</option>
                        <option value="SP" {% if client and client.estado == 'SP' %}selected{% endif %}>São Paulo</option>
                        <option value="SE" {% if client and client.estado == 'SE' %}selected{% endif %}>Sergipe</option>
                        <option value="TO" {% if client and client.estado == 'TO' %}selected{% endif %}>Tocantins</option>
                    </select>
                    <div class="invalid-feedback">
                        Por favor, selecione o estado.
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <label for="cidade" class="form-label">
                        <i class="bi bi-geo me-1"></i>Cidade
                        <span class="text-danger">*</span>
                    </label>
                    <input type="text" class="form-control" id="cidade" name="cidade"
                           value="{{ client.cidade if client else '' }}" required>
                    <div class="invalid-feedback">
                        Por favor, informe a cidade.
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <label for="regimeFederal" class="form-label">
                        <i class="bi bi-percent me-1"></i>Regime Federal
                        <span class="text-danger">*</span>
                    </label>
                    <select class="form-select" id="regimeFederal" name="regimeFederal" required>
                        <option value="">Selecione o regime federal</option>
                        <option value="SIMPLES" {% if client and client.regimeFederal == 'SIMPLES' %}selected{% endif %}>Simples Nacional</option>
                        <option value="LUCRO_PRESUMIDO" {% if client and client.regimeFederal == 'LUCRO_PRESUMIDO' %}selected{% endif %}>Lucro Presumido</option>
                        <option value="LUCRO_REAL" {% if client and client.regimeFederal == 'LUCRO_REAL' %}selected{% endif %}>Lucro Real</option>
                        <option value="MEI" {% if client and client.regimeFederal == 'MEI' %}selected{% endif %}>MEI</option>
                    </select>
                    <div class="invalid-feedback">
                        Por favor, selecione o regime federal.
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <label for="regimeEstadual" class="form-label">
                        <i class="bi bi-bank me-1"></i>Regime Estadual
                        <span class="text-danger">*</span>
                    </label>
                    <select class="form-select" id="regimeEstadual" name="regimeEstadual" required>
                        <option value="">Selecione o regime estadual</option>
                        <option value="SIMPLES" {% if client and client.regimeEstadual == 'SIMPLES' %}selected{% endif %}>Simples Nacional</option>
                        <option value="NORMAL" {% if client and client.regimeEstadual == 'NORMAL' %}selected{% endif %}>Regime Normal</option>
                        <option value="ISENTO" {% if client and client.regimeEstadual == 'ISENTO' %}selected{% endif %}>Isento</option>
                    </select>
                    <div class="invalid-feedback">
                        Por favor, selecione o regime estadual.
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <label for="segmento" class="form-label">
                        <i class="bi bi-tags me-1"></i>Segmento
                        <span class="text-danger">*</span>
                    </label>
                    <input type="text" class="form-control" id="segmento" name="segmento"
                           value="{{ client.segmento if client else '' }}" required>
                    <div class="invalid-feedback">
                        Por favor, informe o segmento.
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <label for="atividade" class="form-label">
                        <i class="bi bi-briefcase me-1"></i>Atividade Principal
                        <span class="text-danger">*</span>
                    </label>
                    <input type="text" class="form-control" id="atividade" name="atividade"
                           value="{{ client.atividade if client else '' }}" required>
                    <div class="invalid-feedback">
                        Por favor, informe a atividade principal.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bloco 2: Serviços Prestados pela Control -->
    <div class="card mb-4">
        <div class="card-header bg-success text-white">
            <h5 class="mb-0">
                <i class="fas fa-handshake me-2"></i>
                Bloco 2: Serviços Prestados pela Control
            </h5>
        </div>
        <div class="card-body">
            <div class="row">
                <!-- BPO Financeiro -->
                <div class="col-md-3 mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="bpoFinanceiro" name="bpoFinanceiro" 
                               {% if client and client.bpoFinanceiro %}checked{% endif %}>
                        <label class="form-check-label" for="bpoFinanceiro">
                            <i class="bi bi-graph-up me-1 text-info"></i>
                            <strong>BPO Financeiro</strong>
                        </label>
                    </div>
                </div>

                <!-- Departamento Contábil (CT) -->
                <div class="col-md-3 mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="ct" name="ct" 
                               {% if client and client.ct %}checked{% endif %}>
                        <label class="form-check-label" for="ct">
                            <i class="bi bi-calculator me-1" style="color: var(--control-primary);"></i>
                            <strong>Departamento Contábil (CT)</strong>
                        </label>
                    </div>
                </div>

                <!-- Departamento Fiscal (FS) -->
                <div class="col-md-3 mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="fs" name="fs" 
                               {% if client and client.fs %}checked{% endif %}>
                        <label class="form-check-label" for="fs">
                            <i class="bi bi-file-text me-1" style="color: var(--control-secondary);"></i>
                            <strong>Departamento Fiscal (FS)</strong>
                        </label>
                    </div>
                </div>

                <!-- Departamento Pessoal (DP) -->
                <div class="col-md-3 mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="dp" name="dp" 
                               {% if client and client.dp %}checked{% endif %}>
                        <label class="form-check-label" for="dp">
                            <i class="bi bi-people me-1 text-success"></i>
                            <strong>Departamento Pessoal (DP)</strong>
                        </label>
                    </div>
                </div>

                <!-- Data de Início dos Serviços -->
                <div class="col-md-6 mb-3">
                    <label for="dataInicioServicos" class="form-label">
                        <i class="bi bi-calendar-event me-1"></i>
                        Data de Início dos Serviços
                    </label>
                    <input type="month" class="form-control" id="dataInicioServicos" name="dataInicioServicos" 
                           value="{{ client.dataInicioServicos or client.mesAnoInicio if client else '' }}">
                    <div class="form-text">
                        Formato: Mês/Ano (Ex: 2024-01)
                    </div>
                </div>

                <!-- Responsável pelos Serviços -->
                <div class="col-md-6 mb-3">
                    <label for="responsavelServicos" class="form-label">
                        <i class="bi bi-person-badge me-1"></i>
                        Responsável pelos Serviços
                    </label>
                    <input type="text" class="form-control" id="responsavelServicos" name="responsavelServicos" 
                           value="{{ client.responsavelServicos if client else '' }}"
                           placeholder="Nome do responsável">
                </div>
            </div>

            <!-- Códigos dos Sistemas -->
            <div class="row mt-4">
                <div class="col-12">
                    <h6 class="text-muted mb-3">
                        <i class="fas fa-code me-2"></i>
                        Códigos dos Sistemas
                    </h6>
                </div>

                <div class="col-md-3 mb-3">
                    <label for="codFortesCt" class="form-label">
                        <i class="bi bi-hash me-1"></i>
                        Cód. Fortes CT
                    </label>
                    <input type="text" class="form-control" id="codFortesCt" name="codFortesCt" 
                           value="{{ client.codFortesCt if client else '' }}"
                           placeholder="Código CT">
                </div>

                <div class="col-md-3 mb-3">
                    <label for="codFortesFs" class="form-label">
                        <i class="bi bi-hash me-1"></i>
                        Cód. Fortes FS
                    </label>
                    <input type="text" class="form-control" id="codFortesFs" name="codFortesFs" 
                           value="{{ client.codFortesFs if client else '' }}"
                           placeholder="Código FS">
                </div>

                <div class="col-md-3 mb-3">
                    <label for="codFortesPs" class="form-label">
                        <i class="bi bi-hash me-1"></i>
                        Cód. Fortes PS
                    </label>
                    <input type="text" class="form-control" id="codFortesPs" name="codFortesPs" 
                           value="{{ client.codFortesPs if client else '' }}"
                           placeholder="Código PS">
                </div>

                <div class="col-md-3 mb-3">
                    <label for="codDominio" class="form-label">
                        <i class="bi bi-hash me-1"></i>
                        Cód. Domínio
                    </label>
                    <input type="text" class="form-control" id="codDominio" name="codDominio" 
                           value="{{ client.codDominio if client else '' }}"
                           placeholder="Código Domínio">
                </div>
            </div>

            <!-- Sistema e Módulos -->
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="sistemaUtilizado" class="form-label">
                        <i class="bi bi-pc-display me-1"></i>
                        Sistema Utilizado
                    </label>
                    <input type="text" class="form-control" id="sistemaUtilizado" name="sistemaUtilizado" 
                           value="{{ client.sistemaUtilizado if client else '' }}"
                           placeholder="Nome do sistema principal">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="moduloSpedTrier" class="form-label">
                        <i class="bi bi-puzzle me-1"></i>
                        Módulo SPED Trier
                    </label>
                    <input type="text" class="form-control" id="moduloSpedTrier" name="moduloSpedTrier" 
                           value="{{ client.moduloSpedTrier if client else '' }}"
                           placeholder="Módulo específico do SPED">
                </div>
            </div>
        </div>
    </div>

    <!-- Bloco 3: Quadro Societário -->
    <div class="card mb-4">
        <div class="card-header bg-warning text-dark">
            <h5 class="mb-0">
                <i class="fas fa-users me-2"></i>
                Bloco 3: Quadro Societário
            </h5>
        </div>
        <div class="card-body">
            <div id="socios-container">
                <!-- Sócio 1 (sempre presente) -->
                <div class="socio-item" data-socio-index="1">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h6 class="text-muted mb-0">
                            <i class="fas fa-user me-2"></i>
                            Sócio 1
                        </h6>
                        <button type="button" class="btn btn-sm btn-outline-danger remove-socio" data-socio-index="1" style="display: none;">
                            <i class="fas fa-trash me-1"></i>Remover
                        </button>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="socio1_nome" class="form-label">
                                <i class="bi bi-person me-1"></i>
                                Nome
                            </label>
                            <input type="text" class="form-control" id="socio1_nome" name="socio1_nome" 
                                   value="{{ client.socio1_nome if client else '' }}"
                                   placeholder="Nome completo do sócio">
                        </div>

                        <div class="col-md-4 mb-3">
                            <label for="socio1_cpf" class="form-label">
                                <i class="bi bi-card-text me-1"></i>
                                CPF
                            </label>
                            <input type="text" class="form-control cpf-mask" id="socio1_cpf" name="socio1_cpf" 
                                   value="{{ client.socio1_cpf if client else '' }}"
                                   placeholder="000.000.000-00">
                        </div>

                        <div class="col-md-4 mb-3">
                            <label for="socio1_nascimento" class="form-label">
                                <i class="bi bi-calendar me-1"></i>
                                Data de Nascimento
                            </label>
                            <input type="date" class="form-control" id="socio1_nascimento" name="socio1_nascimento" 
                                   value="{{ client.socio1_nascimento if client else '' }}">
                        </div>

                        <div class="col-md-3 mb-3">
                            <label for="socio1_admin" class="form-label">
                                <i class="bi bi-shield-check me-1"></i>
                                Sócio Administrador
                            </label>
                            <select class="form-select" id="socio1_admin" name="socio1_admin">
                                <option value="">Selecionar</option>
                                <option value="Sim" {% if client and client.socio1_admin == 'Sim' %}selected{% endif %}>Sim</option>
                                <option value="Não" {% if client and client.socio1_admin == 'Não' %}selected{% endif %}>Não</option>
                            </select>
                        </div>

                        <div class="col-md-3 mb-3">
                            <label for="socio1_cotas" class="form-label">
                                <i class="bi bi-percent me-1"></i>
                                % de Cotas
                            </label>
                            <input type="number" class="form-control" id="socio1_cotas" name="socio1_cotas" 
                                   value="{{ client.socio1_cotas if client else '' }}"
                                   min="0" max="100" step="0.01" placeholder="0.00">
                        </div>

                        <div class="col-md-6 mb-3">
                            <label for="socio1_resp_legal" class="form-label">
                                <i class="bi bi-award me-1"></i>
                                Responsável Legal na Receita
                            </label>
                            <select class="form-select resp-legal-select" id="socio1_resp_legal" name="socio1_resp_legal">
                                <option value="">Selecionar</option>
                                <option value="Sim" {% if client and client.socio1_resp_legal == 'Sim' %}selected{% endif %}>Sim</option>
                                <option value="Não" {% if client and client.socio1_resp_legal == 'Não' %}selected{% endif %}>Não</option>
                            </select>
                            <div class="form-text">
                                <small class="text-warning">
                                    <i class="fas fa-exclamation-triangle me-1"></i>
                                    Apenas um sócio pode ser marcado como Responsável Legal
                                </small>
                            </div>
                        </div>
                    </div>
                    <hr class="my-4">
                </div>
            </div>

            <!-- Botão para adicionar novo sócio -->
            <div class="text-center">
                <button type="button" class="btn btn-outline-primary" id="add-socio">
                    <i class="fas fa-plus me-2"></i>
                    Adicionar Novo Sócio
                </button>
            </div>
        </div>
    </div>

    <!-- Códigos e Sistemas -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">
                <i class="bi bi-code-square me-2 text-info"></i>
                Códigos e Sistemas
            </h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="codFortesCt" class="form-label">
                        <i class="bi bi-hash me-1"></i>Código Fortes CT
                    </label>
                    <input type="text" class="form-control" id="codFortesCt" name="codFortesCt"
                           value="{{ client.codFortesCt if client else '' }}">
                </div>
                
                <div class="col-md-4 mb-3">
                    <label for="codFortesFs" class="form-label">
                        <i class="bi bi-hash me-1"></i>Código Fortes FS
                    </label>
                    <input type="text" class="form-control" id="codFortesFs" name="codFortesFs"
                           value="{{ client.codFortesFs if client else '' }}">
                </div>
                
                <div class="col-md-4 mb-3">
                    <label for="codFortesPs" class="form-label">
                        <i class="bi bi-hash me-1"></i>Código Fortes PS
                    </label>
                    <input type="text" class="form-control" id="codFortesPs" name="codFortesPs"
                           value="{{ client.codFortesPs if client else '' }}">
                </div>
                
                <div class="col-md-6 mb-3">
                    <label for="codDominio" class="form-label">
                        <i class="bi bi-code me-1"></i>Código Domínio
                    </label>
                    <input type="text" class="form-control" id="codDominio" name="codDominio"
                           value="{{ client.codDominio if client else '' }}">
                </div>
                
                <div class="col-md-6 mb-3">
                    <label for="sistemaUtilizado" class="form-label">
                        <i class="bi bi-display me-1"></i>Sistema Utilizado
                    </label>
                    <input type="text" class="form-control" id="sistemaUtilizado" name="sistemaUtilizado"
                           value="{{ client.sistemaUtilizado if client else '' }}">
                </div>
                
                <div class="col-md-12 mb-3">
                    <label for="moduloSpedTrier" class="form-label">
                        <i class="bi bi-file-code me-1"></i>Módulo SPED Trier
                    </label>
                    <input type="text" class="form-control" id="moduloSpedTrier" name="moduloSpedTrier"
                           value="{{ client.moduloSpedTrier if client else '' }}">
                </div>
            </div>
        </div>
    </div>

    <!-- Acessos e Senhas -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">
                <i class="bi bi-key me-2 text-warning"></i>
                Acessos e Senhas
            </h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="codAcessoSimples" class="form-label">
                        <i class="bi bi-shield-check me-1"></i>Código Acesso Simples
                    </label>
                    <input type="text" class="form-control" id="codAcessoSimples" name="codAcessoSimples"
                           value="{{ client.codAcessoSimples if client else '' }}">
                </div>
                
                <div class="col-md-4 mb-3">
                    <label for="cpfOuCnpj" class="form-label">
                        <i class="bi bi-card-text me-1"></i>CPF ou CNPJ (Acesso)
                    </label>
                    <input type="text" class="form-control" id="cpfOuCnpj" name="cpfOuCnpj"
                           value="{{ client.cpfOuCnpj if client else '' }}">
                </div>
                
                <div class="col-md-4 mb-3">
                    <label for="acessoEmpWeb" class="form-label">
                        <i class="bi bi-globe me-1"></i>Acesso EmpWeb
                    </label>
                    <input type="text" class="form-control" id="acessoEmpWeb" name="acessoEmpWeb"
                           value="{{ client.acessoEmpWeb if client else '' }}">
                </div>
                
                <div class="col-md-4 mb-3">
                    <label for="senhaEmpWeb" class="form-label">
                        <i class="bi bi-lock me-1"></i>Senha EmpWeb
                    </label>
                    <input type="password" class="form-control" id="senhaEmpWeb" name="senhaEmpWeb"
                           value="{{ client.senhaEmpWeb if client else '' }}">
                </div>
                
                <div class="col-md-4 mb-3">
                    <label for="acessoIss" class="form-label">
                        <i class="bi bi-building me-1"></i>Acesso ISS
                    </label>
                    <input type="text" class="form-control" id="acessoIss" name="acessoIss"
                           value="{{ client.acessoIss if client else '' }}">
                </div>
                
                <div class="col-md-4 mb-3">
                    <label for="acessoSefin" class="form-label">
                        <i class="bi bi-bank me-1"></i>Acesso SEFIN
                    </label>
                    <input type="text" class="form-control" id="acessoSefin" name="acessoSefin"
                           value="{{ client.acessoSefin if client else '' }}">
                </div>
                
                <div class="col-md-4 mb-3">
                    <label for="acessoSeuma" class="form-label">
                        <i class="bi bi-tree me-1"></i>Acesso SEUMA
                    </label>
                    <input type="text" class="form-control" id="acessoSeuma" name="acessoSeuma"
                           value="{{ client.acessoSeuma if client else '' }}">
                </div>
                
                <div class="col-md-4 mb-3">
                    <label for="acessoFapInss" class="form-label">
                        <i class="bi bi-shield-check me-1"></i>Acesso FAP/INSS
                    </label>
                    <input type="text" class="form-control" id="acessoFapInss" name="acessoFapInss"
                           value="{{ client.acessoFapInss if client else '' }}">
                </div>
                
                <div class="col-md-4 mb-3">
                    <label for="acessoCrf" class="form-label">
                        <i class="bi bi-award me-1"></i>Acesso CRF
                    </label>
                    <input type="text" class="form-control" id="acessoCrf" name="acessoCrf"
                           value="{{ client.acessoCrf if client else '' }}">
                </div>
                
                <div class="col-md-4 mb-3">
                    <label for="acessoIbama" class="form-label">
                        <i class="bi bi-tree-fill me-1"></i>Acesso IBAMA
                    </label>
                    <input type="text" class="form-control" id="acessoIbama" name="acessoIbama"
                           value="{{ client.acessoIbama if client else '' }}">
                </div>
                
                <div class="col-md-4 mb-3">
                    <label for="acessoSemace" class="form-label">
                        <i class="bi bi-shield-fill-check me-1"></i>Acesso SEMACE
                    </label>
                    <input type="text" class="form-control" id="acessoSemace" name="acessoSemace"
                           value="{{ client.acessoSemace if client else '' }}">
                </div>
                
                <div class="col-md-6 mb-3">
                    <label for="senhaSemace" class="form-label">
                        <i class="bi bi-lock-fill me-1"></i>Senha SEMACE
                    </label>
                    <input type="password" class="form-control" id="senhaSemace" name="senhaSemace"
                           value="{{ client.senhaSemace if client else '' }}">
                </div>
            </div>
        </div>
    </div>

    <!-- Procurações -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">
                <i class="bi bi-file-earmark-text me-2 text-info"></i>
                Procurações
            </h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="procRc" class="form-label">
                        <i class="bi bi-file-text me-1"></i>Procuração RC
                    </label>
                    <input type="text" class="form-control" id="procRc" name="procRc"
                           value="{{ client.procRc if client else '' }}">
                </div>
                
                <div class="col-md-4 mb-3">
                    <label for="procCx" class="form-label">
                        <i class="bi bi-file-text me-1"></i>Procuração CX
                    </label>
                    <input type="text" class="form-control" id="procCx" name="procCx"
                           value="{{ client.procCx if client else '' }}">
                </div>
                
                <div class="col-md-4 mb-3">
                    <label for="procSw" class="form-label">
                        <i class="bi bi-file-text me-1"></i>Procuração SW
                    </label>
                    <input type="text" class="form-control" id="procSw" name="procSw"
                           value="{{ client.procSw if client else '' }}">
                </div>
            </div>
        </div>
    </div>

    <!-- Gestão Ambiental e Sanitária -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">
                <i class="bi bi-shield-check me-2 text-success"></i>
                Gestão Ambiental e Sanitária
            </h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="anvisaGestor" class="form-label">
                        <i class="bi bi-person-badge me-1"></i>ANVISA Gestor
                    </label>
                    <input type="text" class="form-control" id="anvisaGestor" name="anvisaGestor"
                           value="{{ client.anvisaGestor if client else '' }}">
                </div>
                
                <div class="col-md-6 mb-3">
                    <label for="anvisaEmpresa" class="form-label">
                        <i class="bi bi-building me-1"></i>ANVISA Empresa
                    </label>
                    <input type="text" class="form-control" id="anvisaEmpresa" name="anvisaEmpresa"
                           value="{{ client.anvisaEmpresa if client else '' }}">
                </div>
            </div>
        </div>
    </div>

    <!-- Contatos e Gestão -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">
                <i class="bi bi-person-lines-fill me-2 text-secondary"></i>
                Contatos e Gestão
            </h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="responsavelImediato" class="form-label">
                        <i class="bi bi-person-badge me-1"></i>Responsável Imediato
                    </label>
                    <input type="text" class="form-control" id="responsavelImediato" name="responsavelImediato"
                           value="{{ client.responsavelImediato if client else '' }}">
                </div>
                
                <div class="col-md-6 mb-3">
                    <label for="emailGestor" class="form-label">
                        <i class="bi bi-envelope me-1"></i>Email do Gestor
                    </label>
                    <input type="email" class="form-control" id="emailGestor" name="emailGestor"
                           value="{{ client.emailGestor if client else '' }}">
                </div>
                
                <div class="col-md-4 mb-3">
                    <label for="telefoneFixo" class="form-label">
                        <i class="bi bi-telephone me-1"></i>Telefone Fixo
                    </label>
                    <input type="tel" class="form-control" id="telefoneFixo" name="telefoneFixo"
                           value="{{ client.telefoneFixo if client else '' }}"
                           placeholder="(85) 3000-0000">
                </div>
                
                <div class="col-md-4 mb-3">
                    <label for="telefoneCelular" class="form-label">
                        <i class="bi bi-phone me-1"></i>Telefone Celular
                    </label>
                    <input type="tel" class="form-control" id="telefoneCelular" name="telefoneCelular"
                           value="{{ client.telefoneCelular if client else '' }}"
                           placeholder="(85) 99999-9999">
                </div>
                
                <div class="col-md-4 mb-3">
                    <label for="emailsSocio" class="form-label">
                        <i class="bi bi-envelope-at me-1"></i>Emails do Sócio
                    </label>
                    <input type="email" class="form-control" id="emailsSocios" name="emailsSocios"
                           value="{{ client.emailsSocios if client else '' }}">
                </div>
            </div>
        </div>
    </div>

    <!-- Sócios -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">
                <i class="bi bi-people me-2 text-primary"></i>
                Informações dos Sócios
            </h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-3 mb-3">
                    <label for="socio1" class="form-label">
                        <i class="bi bi-person me-1"></i>Sócio 1
                    </label>
                    <input type="text" class="form-control" id="socio1" name="socio1"
                           value="{{ client.socio1 if client else '' }}">
                </div>
                
                <div class="col-md-3 mb-3">
                    <label for="socio2" class="form-label">
                        <i class="bi bi-person me-1"></i>Sócio 2
                    </label>
                    <input type="text" class="form-control" id="socio2" name="socio2"
                           value="{{ client.socio2 if client else '' }}">
                </div>
                
                <div class="col-md-3 mb-3">
                    <label for="socio3" class="form-label">
                        <i class="bi bi-person me-1"></i>Sócio 3
                    </label>
                    <input type="text" class="form-control" id="socio3" name="socio3"
                           value="{{ client.socio3 if client else '' }}">
                </div>
                
                <div class="col-md-3 mb-3">
                    <label for="socio4" class="form-label">
                        <i class="bi bi-person me-1"></i>Sócio 4
                    </label>
                    <input type="text" class="form-control" id="socio4" name="socio4"
                           value="{{ client.socio4 if client else '' }}">
                </div>
            </div>
        </div>
    </div>

    <!-- Configurações e Status -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">
                <i class="bi bi-toggles me-2 text-success"></i>
                Configurações e Status
            </h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-3 mb-3">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="ativo" name="ativo"
                               {% if not client or client.ativo %}checked{% endif %}>
                        <label class="form-check-label" for="ativo">
                            <i class="bi bi-check-circle me-1 text-success"></i>
                            <strong>Cliente Ativo</strong>
                        </label>
                    </div>
                </div>
                
                <div class="col-md-3 mb-3">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="integracaoDominio" name="integracaoDominio"
                               {% if client and client.integracaoDominio %}checked{% endif %}>
                        <label class="form-check-label" for="integracaoDominio">
                            <i class="bi bi-link me-1 text-info"></i>
                            <strong>Integrado Domínio</strong>
                        </label>
                    </div>
                </div>
                
                <div class="col-md-3 mb-3">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="portalClienteAtivo" name="portalClienteAtivo"
                               {% if client and client.portalClienteAtivo %}checked{% endif %}>
                        <label class="form-check-label" for="portalClienteAtivo">
                            <i class="bi bi-globe me-1 text-warning"></i>
                            <strong>Portal Cliente</strong>
                        </label>
                    </div>
                </div>
                
                <div class="col-md-3 mb-3">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="sistemaOnvio" name="sistemaOnvio"
                               {% if client and client.sistemaOnvio %}checked{% endif %}>
                        <label class="form-check-label" for="sistemaOnvio">
                            <i class="bi bi-cloud-check me-1 text-primary"></i>
                            <strong>ONVIO</strong>
                        </label>
                        <small class="form-text text-muted d-block">Cliente cadastrado no sistema ONVIO</small>
                    </div>
                </div>
                
                <div class="col-md-3 mb-3">
                    <label for="tarefasVinculadas" class="form-label">
                        <i class="bi bi-list-task me-1"></i>Tarefas Vinculadas
                    </label>
                    <input type="number" class="form-control" id="tarefasVinculadas" name="tarefasVinculadas"
                           value="{{ client.tarefasVinculadas if client else '0' }}" min="0">
                </div>
            </div>
        </div>
    </div>

    <!-- Bloco 4: Contatos -->
    <div class="card mb-4">
        <div class="card-header bg-info text-white">
            <h5 class="mb-0">
                <i class="fas fa-address-book me-2"></i>Bloco 4: Contatos
            </h5>
        </div>
        <div class="card-body">
            <div class="row">
                <!-- Telefone Fixo -->
                <div class="col-md-4 mb-3">
                    <label for="telefoneFixo" class="form-label">Telefone Fixo</label>
                    <input type="tel" class="form-control" id="telefoneFixo" name="telefoneFixo" 
                           value="{{ client.telefoneFixo if client else '' }}" 
                           placeholder="(85) 3000-0000">
                </div>
                
                <!-- Telefone Celular -->
                <div class="col-md-4 mb-3">
                    <label for="telefoneCelular" class="form-label">Telefone Celular</label>
                    <input type="tel" class="form-control" id="telefoneCelular" name="telefoneCelular" 
                           value="{{ client.telefoneCelular if client else '' }}" 
                           placeholder="(85) 99999-9999">
                </div>
                
                <!-- WhatsApp -->
                <div class="col-md-4 mb-3">
                    <label for="whatsapp" class="form-label">WhatsApp</label>
                    <input type="tel" class="form-control" id="whatsapp" name="whatsapp" 
                           value="{{ client.whatsapp if client else '' }}" 
                           placeholder="(85) 99999-9999">
                </div>
            </div>
            
            <div class="row">
                <!-- E-mail Principal -->
                <div class="col-md-6 mb-3">
                    <label for="emailPrincipal" class="form-label">E-mail Principal <span class="text-danger">*</span></label>
                    <input type="email" class="form-control" id="emailPrincipal" name="emailPrincipal" 
                           value="{{ client.emailPrincipal if client else '' }}" 
                           placeholder="contato@empresa.com.br" required>
                </div>
                
                <!-- E-mail Secundário -->
                <div class="col-md-6 mb-3">
                    <label for="emailSecundario" class="form-label">E-mail Secundário</label>
                    <input type="email" class="form-control" id="emailSecundario" name="emailSecundario" 
                           value="{{ client.emailSecundario if client else '' }}" 
                           placeholder="financeiro@empresa.com.br">
                </div>
            </div>
            
            <div class="row">
                <!-- Responsável Imediato -->
                <div class="col-md-6 mb-3">
                    <label for="responsavelImediato" class="form-label">Responsável Imediato</label>
                    <input type="text" class="form-control" id="responsavelImediato" name="responsavelImediato" 
                           value="{{ client.responsavelImediato if client else '' }}" 
                           placeholder="Nome do responsável pela empresa">
                </div>
                
                <!-- E-mails dos Sócios -->
                <div class="col-md-6 mb-3">
                    <label for="emailsSocios" class="form-label">E-mails dos Sócios</label>
                    <textarea class="form-control" id="emailsSocios" name="emailsSocios" rows="2" 
                              placeholder="socio1@email.com, socio2@email.com">{{ client.emailsSocios if client else '' }}</textarea>
                    <div class="form-text">Separar múltiplos e-mails por vírgula</div>
                </div>
            </div>
            
            <div class="row">
                <!-- Contato Contador -->
                <div class="col-md-4 mb-3">
                    <label for="contatoContador" class="form-label">Contato Contador</label>
                    <input type="text" class="form-control" id="contatoContador" name="contatoContador" 
                           value="{{ client.contatoContador if client else '' }}" 
                           placeholder="Nome do contador responsável">
                </div>
                
                <!-- Telefone Contador -->
                <div class="col-md-4 mb-3">
                    <label for="telefoneContador" class="form-label">Telefone Contador</label>
                    <input type="tel" class="form-control" id="telefoneContador" name="telefoneContador" 
                           value="{{ client.telefoneContador if client else '' }}" 
                           placeholder="(85) 99999-9999">
                </div>
                
                <!-- E-mail Contador -->
                <div class="col-md-4 mb-3">
                    <label for="emailContador" class="form-label">E-mail Contador</label>
                    <input type="email" class="form-control" id="emailContador" name="emailContador" 
                           value="{{ client.emailContador if client else '' }}" 
                           placeholder="contador@controlcontabilidade.com.br">
                </div>
            </div>
        </div>
    </div>

    <!-- Bloco 5: Sistemas e Acessos -->
    <div class="card mb-4">
        <div class="card-header bg-warning text-dark">
            <h5 class="mb-0">
                <i class="fas fa-desktop me-2"></i>Bloco 5: Sistemas e Acessos
            </h5>
        </div>
        <div class="card-body">
            <div class="row">
                <!-- Sistema Principal Utilizado -->
                <div class="col-md-6 mb-3">
                    <label for="sistemaPrincipal" class="form-label">Sistema Principal Utilizado</label>
                    <select class="form-select" id="sistemaPrincipal" name="sistemaPrincipal">
                        <option value="">Selecione...</option>
                        <option value="Dominio" {{ 'selected' if client and client.sistemaPrincipal == 'Dominio' else '' }}>Domínio</option>
                        <option value="Fortes" {{ 'selected' if client and client.sistemaPrincipal == 'Fortes' else '' }}>Fortes</option>
                        <option value="Outros" {{ 'selected' if client and client.sistemaPrincipal == 'Outros' else '' }}>Outros</option>
                    </select>
                </div>
                
                <!-- Versão do Sistema -->
                <div class="col-md-6 mb-3">
                    <label for="versaoSistema" class="form-label">Versão do Sistema</label>
                    <input type="text" class="form-control" id="versaoSistema" name="versaoSistema" 
                           value="{{ client.versaoSistema if client else '' }}" 
                           placeholder="Ex: 2024.1, v3.2, etc.">
                </div>
            </div>
            
            <div class="row">
                <!-- Código de Acesso Simples Nacional -->
                <div class="col-md-6 mb-3">
                    <label for="codAcessoSimples" class="form-label">Código Acesso Simples Nacional</label>
                    <input type="text" class="form-control" id="codAcessoSimples" name="codAcessoSimples" 
                           value="{{ client.codAcessoSimples if client else '' }}" 
                           placeholder="Código de acesso SN">
                </div>
                
                <!-- CPF ou CNPJ para Acesso -->
                <div class="col-md-6 mb-3">
                    <label for="cpfCnpjAcesso" class="form-label">CPF/CNPJ para Acesso</label>
                    <input type="text" class="form-control" id="cpfCnpjAcesso" name="cpfCnpjAcesso" 
                           value="{{ client.cpfCnpjAcesso if client else '' }}" 
                           placeholder="CPF ou CNPJ usado nos acessos">
                </div>
            </div>
            
            <div class="row">
                <!-- Portal do Cliente -->
                <div class="col-md-4 mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="portalClienteAtivo" name="portalClienteAtivo" 
                               {{ 'checked' if client and client.portalClienteAtivo else '' }}>
                        <label class="form-check-label" for="portalClienteAtivo">
                            Portal do Cliente Ativo
                        </label>
                    </div>
                </div>
                
                <!-- Integração Domínio -->
                <div class="col-md-4 mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="integracaoDominio" name="integracaoDominio" 
                               {{ 'checked' if client and client.integracaoDominio else '' }}>
                        <label class="form-check-label" for="integracaoDominio">
                            Integração com Domínio
                        </label>
                    </div>
                </div>
                
                <!-- Sistema Onvio -->
                <div class="col-md-4 mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="sistemaOnvio" name="sistemaOnvio" 
                               {{ 'checked' if client and client.sistemaOnvio else '' }}>
                        <label class="form-check-label" for="sistemaOnvio">
                            Sistema Onvio
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bloco 6: Senhas e Credenciais -->
    <div class="card mb-4">
        <div class="card-header bg-danger text-white">
            <h5 class="mb-0">
                <i class="fas fa-key me-2"></i>Bloco 6: Senhas e Credenciais
            </h5>
        </div>
        <div class="card-body">
            <div class="alert alert-warning" role="alert">
                <i class="fas fa-exclamation-triangle me-2"></i>
                <strong>Atenção!</strong> Informações sensíveis. Mantenha a confidencialidade.
            </div>
            
            <div class="row">
                <!-- Acesso ISS -->
                <div class="col-md-6 mb-3">
                    <label for="acessoIss" class="form-label">Acesso ISS</label>
                    <input type="text" class="form-control" id="acessoIss" name="acessoIss" 
                           value="{{ client.acessoIss if client else '' }}" 
                           placeholder="Login ISS">
                </div>
                
                <!-- Senha ISS -->
                <div class="col-md-6 mb-3">
                    <label for="senhaIss" class="form-label">Senha ISS</label>
                    <input type="password" class="form-control" id="senhaIss" name="senhaIss" 
                           value="{{ client.senhaIss if client else '' }}">
                </div>
            </div>
            
            <div class="row">
                <!-- Acesso SEFIN -->
                <div class="col-md-6 mb-3">
                    <label for="acessoSefin" class="form-label">Acesso SEFIN</label>
                    <input type="text" class="form-control" id="acessoSefin" name="acessoSefin" 
                           value="{{ client.acessoSefin if client else '' }}" 
                           placeholder="Login SEFIN">
                </div>
                
                <!-- Senha SEFIN -->
                <div class="col-md-6 mb-3">
                    <label for="senhaSefin" class="form-label">Senha SEFIN</label>
                    <input type="password" class="form-control" id="senhaSefin" name="senhaSefin" 
                           value="{{ client.senhaSefin if client else '' }}">
                </div>
            </div>
            
            <div class="row">
                <!-- Acesso SEUMA -->
                <div class="col-md-6 mb-3">
                    <label for="acessoSeuma" class="form-label">Acesso SEUMA</label>
                    <input type="text" class="form-control" id="acessoSeuma" name="acessoSeuma" 
                           value="{{ client.acessoSeuma if client else '' }}" 
                           placeholder="Login SEUMA">
                </div>
                
                <!-- Senha SEUMA -->
                <div class="col-md-6 mb-3">
                    <label for="senhaSeuma" class="form-label">Senha SEUMA</label>
                    <input type="password" class="form-control" id="senhaSeuma" name="senhaSeuma" 
                           value="{{ client.senhaSeuma if client else '' }}">
                </div>
            </div>
            
            <div class="row">
                <!-- Acesso EmpWeb -->
                <div class="col-md-6 mb-3">
                    <label for="acessoEmpWeb" class="form-label">Acesso EmpWeb</label>
                    <input type="text" class="form-control" id="acessoEmpWeb" name="acessoEmpWeb" 
                           value="{{ client.acessoEmpWeb if client else '' }}" 
                           placeholder="Login EmpWeb">
                </div>
                
                <!-- Senha EmpWeb -->
                <div class="col-md-6 mb-3">
                    <label for="senhaEmpWeb" class="form-label">Senha EmpWeb</label>
                    <input type="password" class="form-control" id="senhaEmpWeb" name="senhaEmpWeb" 
                           value="{{ client.senhaEmpWeb if client else '' }}">
                </div>
            </div>
            
            <div class="row">
                <!-- Acesso FAP/INSS -->
                <div class="col-md-6 mb-3">
                    <label for="acessoFapInss" class="form-label">Acesso FAP/INSS</label>
                    <input type="text" class="form-control" id="acessoFapInss" name="acessoFapInss" 
                           value="{{ client.acessoFapInss if client else '' }}" 
                           placeholder="Login FAP/INSS">
                </div>
                
                <!-- Senha FAP/INSS -->
                <div class="col-md-6 mb-3">
                    <label for="senhaFapInss" class="form-label">Senha FAP/INSS</label>
                    <input type="password" class="form-control" id="senhaFapInss" name="senhaFapInss" 
                           value="{{ client.senhaFapInss if client else '' }}">
                </div>
            </div>
            
            <div class="row">
                <!-- Acesso CRF -->
                <div class="col-md-6 mb-3">
                    <label for="acessoCrf" class="form-label">Acesso CRF</label>
                    <input type="text" class="form-control" id="acessoCrf" name="acessoCrf" 
                           value="{{ client.acessoCrf if client else '' }}" 
                           placeholder="Login CRF">
                </div>
                
                <!-- Senha CRF -->
                <div class="col-md-6 mb-3">
                    <label for="senhaCrf" class="form-label">Senha CRF</label>
                    <input type="password" class="form-control" id="senhaCrf" name="senhaCrf" 
                           value="{{ client.senhaCrf if client else '' }}">
                </div>
            </div>
            
            <div class="row">
                <!-- E-mail Gestor -->
                <div class="col-md-6 mb-3">
                    <label for="emailGestor" class="form-label">E-mail Gestor</label>
                    <input type="email" class="form-control" id="emailGestor" name="emailGestor" 
                           value="{{ client.emailGestor if client else '' }}" 
                           placeholder="gestor@empresa.com.br">
                </div>
                
                <!-- Senha E-mail Gestor -->
                <div class="col-md-6 mb-3">
                    <label for="senhaEmailGestor" class="form-label">Senha E-mail Gestor</label>
                    <input type="password" class="form-control" id="senhaEmailGestor" name="senhaEmailGestor" 
                           value="{{ client.senhaEmailGestor if client else '' }}">
                </div>
            </div>
            
            <div class="row">
                <!-- ANVISA Gestor -->
                <div class="col-md-6 mb-3">
                    <label for="anvisaGestor" class="form-label">ANVISA Gestor</label>
                    <input type="text" class="form-control" id="anvisaGestor" name="anvisaGestor" 
                           value="{{ client.anvisaGestor if client else '' }}" 
                           placeholder="Login ANVISA Gestor">
                </div>
                
                <!-- ANVISA Empresa -->
                <div class="col-md-6 mb-3">
                    <label for="anvisaEmpresa" class="form-label">ANVISA Empresa</label>
                    <input type="text" class="form-control" id="anvisaEmpresa" name="anvisaEmpresa" 
                           value="{{ client.anvisaEmpresa if client else '' }}" 
                           placeholder="Login ANVISA Empresa">
                </div>
            </div>
            
            <div class="row">
                <!-- Acesso IBAMA -->
                <div class="col-md-6 mb-3">
                    <label for="acessoIbama" class="form-label">Acesso IBAMA</label>
                    <input type="text" class="form-control" id="acessoIbama" name="acessoIbama" 
                           value="{{ client.acessoIbama if client else '' }}" 
                           placeholder="Login IBAMA">
                </div>
                
                <!-- Senha IBAMA -->
                <div class="col-md-6 mb-3">
                    <label for="senhaIbama" class="form-label">Senha IBAMA</label>
                    <input type="password" class="form-control" id="senhaIbama" name="senhaIbama" 
                           value="{{ client.senhaIbama if client else '' }}">
                </div>
            </div>
            
            <div class="row">
                <!-- Acesso SEMACE -->
                <div class="col-md-6 mb-3">
                    <label for="acessoSemace" class="form-label">Acesso SEMACE</label>
                    <input type="text" class="form-control" id="acessoSemace" name="acessoSemace" 
                           value="{{ client.acessoSemace if client else '' }}" 
                           placeholder="Login SEMACE">
                </div>
                
                <!-- Senha SEMACE -->
                <div class="col-md-6 mb-3">
                    <label for="senhaSemace" class="form-label">Senha SEMACE</label>
                    <input type="password" class="form-control" id="senhaSemace" name="senhaSemace" 
                           value="{{ client.senhaSemace if client else '' }}">
                </div>
            </div>
        </div>
    </div>

    <!-- Bloco 7: Procurações -->
    <div class="card mb-4">
        <div class="card-header bg-secondary text-white">
            <h5 class="mb-0">
                <i class="fas fa-file-contract me-2"></i>Bloco 7: Procurações
            </h5>
        </div>
        <div class="card-body">
            <div class="row">
                <!-- Procuração RFB (Receita Federal) -->
                <div class="col-md-4 mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="procRfb" name="procRfb" 
                               {{ 'checked' if client and client.procRfb else '' }}>
                        <label class="form-check-label" for="procRfb">
                            Procuração RFB (Receita Federal)
                        </label>
                    </div>
                    <div class="mt-2">
                        <label for="procRfbData" class="form-label">Data da Procuração</label>
                        <input type="date" class="form-control" id="procRfbData" name="procRfbData" 
                               value="{{ client.procRfbData if client else '' }}">
                    </div>
                </div>
                
                <!-- Procuração RC (Receita Estadual) -->
                <div class="col-md-4 mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="procRc" name="procRc" 
                               {{ 'checked' if client and client.procRc else '' }}>
                        <label class="form-check-label" for="procRc">
                            Procuração RC (Receita Estadual)
                        </label>
                    </div>
                    <div class="mt-2">
                        <label for="procRcData" class="form-label">Data da Procuração</label>
                        <input type="date" class="form-control" id="procRcData" name="procRcData" 
                               value="{{ client.procRcData if client else '' }}">
                    </div>
                </div>
                
                <!-- Procuração CX (Caixa Econômica) -->
                <div class="col-md-4 mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="procCx" name="procCx" 
                               {{ 'checked' if client and client.procCx else '' }}>
                        <label class="form-check-label" for="procCx">
                            Procuração CX (Caixa Econômica)
                        </label>
                    </div>
                    <div class="mt-2">
                        <label for="procCxData" class="form-label">Data da Procuração</label>
                        <input type="date" class="form-control" id="procCxData" name="procCxData" 
                               value="{{ client.procCxData if client else '' }}">
                    </div>
                </div>
            </div>
            
            <div class="row">
                <!-- Procuração SW (Previdência Social) -->
                <div class="col-md-4 mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="procSw" name="procSw" 
                               {{ 'checked' if client and client.procSw else '' }}>
                        <label class="form-check-label" for="procSw">
                            Procuração SW (Previdência Social)
                        </label>
                    </div>
                    <div class="mt-2">
                        <label for="procSwData" class="form-label">Data da Procuração</label>
                        <input type="date" class="form-control" id="procSwData" name="procSwData" 
                               value="{{ client.procSwData if client else '' }}">
                    </div>
                </div>
                
                <!-- Procuração Municipal -->
                <div class="col-md-4 mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="procMunicipal" name="procMunicipal" 
                               {{ 'checked' if client and client.procMunicipal else '' }}>
                        <label class="form-check-label" for="procMunicipal">
                            Procuração Municipal
                        </label>
                    </div>
                    <div class="mt-2">
                        <label for="procMunicipalData" class="form-label">Data da Procuração</label>
                        <input type="date" class="form-control" id="procMunicipalData" name="procMunicipalData" 
                               value="{{ client.procMunicipalData if client else '' }}">
                    </div>
                </div>
                
                <!-- Outras Procurações -->
                <div class="col-md-4 mb-3">
                    <label for="outrasProc" class="form-label">Outras Procurações</label>
                    <textarea class="form-control" id="outrasProc" name="outrasProc" rows="3" 
                              placeholder="Descreva outras procurações...">{{ client.outrasProc if client else '' }}</textarea>
                </div>
            </div>
            
            <div class="row">
                <!-- Observações sobre Procurações -->
                <div class="col-12 mb-3">
                    <label for="obsProcuracoes" class="form-label">Observações sobre Procurações</label>
                    <textarea class="form-control" id="obsProcuracoes" name="obsProcuracoes" rows="3" 
                              placeholder="Observações gerais sobre as procurações...">{{ client.obsProcuracoes if client else '' }}</textarea>
                </div>
            </div>
        </div>
    </div>

    <!-- Bloco 8: Observações e Dados Adicionais -->
    <div class="card mb-4">
        <div class="card-header bg-dark text-white">
            <h5 class="mb-0">
                <i class="fas fa-sticky-note me-2"></i>Bloco 8: Observações e Dados Adicionais
            </h5>
        </div>
        <div class="card-body">
            <div class="row">
                <!-- Observações Gerais -->
                <div class="col-12 mb-3">
                    <label for="observacoesGerais" class="form-label">Observações Gerais</label>
                    <textarea class="form-control" id="observacoesGerais" name="observacoesGerais" rows="4" 
                              placeholder="Observações gerais sobre o cliente, particularidades, histórico, etc.">{{ client.observacoesGerais if client else '' }}</textarea>
                </div>
            </div>
            
            <div class="row">
                <!-- Tarefas Vinculadas -->
                <div class="col-md-4 mb-3">
                    <label for="tarefasVinculadas" class="form-label">Tarefas Vinculadas</label>
                    <input type="number" class="form-control" id="tarefasVinculadas" name="tarefasVinculadas" 
                           value="{{ client.tarefasVinculadas if client else '' }}" 
                           placeholder="0" min="0">
                    <div class="form-text">Número de tarefas vinculadas ao cliente</div>
                </div>
                
                <!-- Data de Início dos Serviços -->
                <div class="col-md-4 mb-3">
                    <label for="dataInicioServicos" class="form-label">Data Início dos Serviços</label>
                    <input type="date" class="form-control" id="dataInicioServicos" name="dataInicioServicos" 
                           value="{{ client.dataInicioServicos if client else '' }}">
                </div>
                
                <!-- Status do Cliente -->
                <div class="col-md-4 mb-3">
                    <label for="statusCliente" class="form-label">Status do Cliente</label>
                    <select class="form-select" id="statusCliente" name="statusCliente">
                        <option value="ativo" {{ 'selected' if client and client.statusCliente == 'ativo' else '' }}>Ativo</option>
                        <option value="inativo" {{ 'selected' if client and client.statusCliente == 'inativo' else '' }}>Inativo</option>
                        <option value="suspenso" {{ 'selected' if client and client.statusCliente == 'suspenso' else '' }}>Suspenso</option>
                        <option value="em_analise" {{ 'selected' if client and client.statusCliente == 'em_analise' else '' }}>Em Análise</option>
                    </select>
                </div>
            </div>
            
            <div class="row">
                <!-- Data da Última Atualização -->
                <div class="col-md-4 mb-3">
                    <label for="ultimaAtualizacao" class="form-label">Última Atualização</label>
                    <input type="datetime-local" class="form-control" id="ultimaAtualizacao" name="ultimaAtualizacao" 
                           value="{{ client.ultimaAtualizacao if client else '' }}" readonly>
                    <div class="form-text">Atualizado automaticamente</div>
                </div>
                
                <!-- Responsável pela Atualização -->
                <div class="col-md-4 mb-3">
                    <label for="responsavelAtualizacao" class="form-label">Responsável pela Atualização</label>
                    <input type="text" class="form-control" id="responsavelAtualizacao" name="responsavelAtualizacao" 
                           value="{{ session.usuario if session.usuario else '' }}" readonly>
                    <div class="form-text">Usuário logado no sistema</div>
                </div>
                
                <!-- Prioridade -->
                <div class="col-md-4 mb-3">
                    <label for="prioridadeCliente" class="form-label">Prioridade</label>
                    <select class="form-select" id="prioridadeCliente" name="prioridadeCliente">
                        <option value="normal" {{ 'selected' if client and client.prioridadeCliente == 'normal' else '' }}>Normal</option>
                        <option value="alta" {{ 'selected' if client and client.prioridadeCliente == 'alta' else '' }}>Alta</option>
                        <option value="urgente" {{ 'selected' if client and client.prioridadeCliente == 'urgente' else '' }}>Urgente</option>
                        <option value="baixa" {{ 'selected' if client and client.prioridadeCliente == 'baixa' else '' }}>Baixa</option>
                    </select>
                </div>
            </div>
            
            <div class="row">
                <!-- Tags/Categorias -->
                <div class="col-md-6 mb-3">
                    <label for="tagsCliente" class="form-label">Tags/Categorias</label>
                    <input type="text" class="form-control" id="tagsCliente" name="tagsCliente" 
                           value="{{ client.tagsCliente if client else '' }}" 
                           placeholder="empresa_grande, complexo, especial">
                    <div class="form-text">Separar tags por vírgula</div>
                </div>
                
                <!-- Histórico de Alterações -->
                <div class="col-md-6 mb-3">
                    <label for="historicoAlteracoes" class="form-label">Histórico de Alterações</label>
                    <textarea class="form-control" id="historicoAlteracoes" name="historicoAlteracoes" rows="3" 
                              placeholder="Registro das principais alterações..." readonly>{{ client.historicoAlteracoes if client else '' }}</textarea>
                    <div class="form-text">Atualizado automaticamente pelo sistema</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Botões de ação -->
    <div class="card">
        <div class="card-body">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <button type="submit" class="btn btn-primary me-3">
                        <i class="bi bi-check-lg me-1"></i>
                        {% if client %}Atualizar Cliente{% else %}Salvar Cliente{% endif %}
                    </button>
                    <a href="/" class="btn btn-secondary">
                        <i class="bi bi-x-lg me-1"></i>
                        Cancelar
                    </a>
                </div>
                {% if client %}
                <button type="button" class="btn btn-outline-danger" 
                        onclick="confirmDelete('{{ client.id }}', '{{ client.nomeEmpresa }}')">
                    <i class="bi bi-trash me-1"></i>
                    Excluir Cliente
                </button>
                {% endif %}
            </div>
        </div>
    </div>
</form>

<!-- Modal de confirmação de exclusão -->
{% if client %}
<div class="modal fade" id="deleteModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                    Confirmar Exclusão
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p>Tem certeza que deseja excluir o cliente <strong id="clientName">{{ client.nomeEmpresa }}</strong>?</p>
                <p class="text-muted">Esta ação não pode ser desfeita.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <form id="deleteForm" method="POST" action="/client/{{ client.id }}/delete" style="display: inline;">
                    <button type="submit" class="btn btn-danger">
                        <i class="bi bi-trash me-1"></i>Excluir
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endif %}

<script>
// ===== FUNCIONALIDADE DINÂMICA DOS SÓCIOS =====

let socioCounter = 1;

// Função para adicionar novo sócio
document.getElementById('add-socio').addEventListener('click', function() {
    socioCounter++;
    const container = document.getElementById('socios-container');
    
    const newSocioHTML = `
        <div class="socio-item" data-socio-index="${socioCounter}">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h6 class="text-muted mb-0">
                    <i class="fas fa-user me-2"></i>
                    Sócio ${socioCounter}
                </h6>
                <button type="button" class="btn btn-sm btn-outline-danger remove-socio" data-socio-index="${socioCounter}">
                    <i class="fas fa-trash me-1"></i>Remover
                </button>
            </div>
            
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="socio${socioCounter}_nome" class="form-label">
                        <i class="bi bi-person me-1"></i>
                        Nome
                    </label>
                    <input type="text" class="form-control" id="socio${socioCounter}_nome" name="socio${socioCounter}_nome" 
                           placeholder="Nome completo do sócio">
                </div>

                <div class="col-md-4 mb-3">
                    <label for="socio${socioCounter}_cpf" class="form-label">
                        <i class="bi bi-card-text me-1"></i>
                        CPF
                    </label>
                    <input type="text" class="form-control cpf-mask" id="socio${socioCounter}_cpf" name="socio${socioCounter}_cpf" 
                           placeholder="000.000.000-00">
                </div>

                <div class="col-md-4 mb-3">
                    <label for="socio${socioCounter}_nascimento" class="form-label">
                        <i class="bi bi-calendar me-1"></i>
                        Data de Nascimento
                    </label>
                    <input type="date" class="form-control" id="socio${socioCounter}_nascimento" name="socio${socioCounter}_nascimento">
                </div>

                <div class="col-md-3 mb-3">
                    <label for="socio${socioCounter}_admin" class="form-label">
                        <i class="bi bi-shield-check me-1"></i>
                        Sócio Administrador
                    </label>
                    <select class="form-select" id="socio${socioCounter}_admin" name="socio${socioCounter}_admin">
                        <option value="">Selecionar</option>
                        <option value="Sim">Sim</option>
                        <option value="Não">Não</option>
                    </select>
                </div>

                <div class="col-md-3 mb-3">
                    <label for="socio${socioCounter}_cotas" class="form-label">
                        <i class="bi bi-percent me-1"></i>
                        % de Cotas
                    </label>
                    <input type="number" class="form-control" id="socio${socioCounter}_cotas" name="socio${socioCounter}_cotas" 
                           min="0" max="100" step="0.01" placeholder="0.00">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="socio${socioCounter}_resp_legal" class="form-label">
                        <i class="bi bi-award me-1"></i>
                        Responsável Legal na Receita
                    </label>
                    <select class="form-select resp-legal-select" id="socio${socioCounter}_resp_legal" name="socio${socioCounter}_resp_legal">
                        <option value="">Selecionar</option>
                        <option value="Sim">Sim</option>
                        <option value="Não">Não</option>
                    </select>
                    <div class="form-text">
                        <small class="text-warning">
                            <i class="fas fa-exclamation-triangle me-1"></i>
                            Apenas um sócio pode ser marcado como Responsável Legal
                        </small>
                    </div>
                </div>
            </div>
            <hr class="my-4">
        </div>
    `;
    
    container.insertAdjacentHTML('beforeend', newSocioHTML);
    
    // Aplicar máscara CPF no novo campo
    applyCpfMask();
    
    // Mostrar botão remover do primeiro sócio se tiver mais de um
    updateRemoveButtons();
    
    // Reaplica o controle de responsável legal
    setupRespLegalControl();
});

// Função para remover sócio
document.addEventListener('click', function(e) {
    if (e.target.classList.contains('remove-socio') || e.target.closest('.remove-socio')) {
        const button = e.target.classList.contains('remove-socio') ? e.target : e.target.closest('.remove-socio');
        const socioItem = button.closest('.socio-item');
        
        if (socioItem) {
            socioItem.remove();
            updateRemoveButtons();
            renumberSocios();
        }
    }
});

// Função para atualizar visibilidade dos botões remover
function updateRemoveButtons() {
    const socioItems = document.querySelectorAll('.socio-item');
    const removeButtons = document.querySelectorAll('.remove-socio');
    
    if (socioItems.length > 1) {
        removeButtons.forEach(btn => {
            btn.style.display = 'inline-block';
        });
    } else {
        removeButtons.forEach(btn => {
            btn.style.display = 'none';
        });
    }
}

// Função para renumerar sócios após remoção
function renumberSocios() {
    const socioItems = document.querySelectorAll('.socio-item');
    socioItems.forEach((item, index) => {
        const newIndex = index + 1;
        
        // Atualizar data-socio-index
        item.setAttribute('data-socio-index', newIndex);
        
        // Atualizar título
        const title = item.querySelector('h6');
        title.innerHTML = `<i class="fas fa-user me-2"></i>Sócio ${newIndex}`;
        
        // Atualizar IDs e names dos inputs
        const inputs = item.querySelectorAll('input, select');
        inputs.forEach(input => {
            const currentName = input.name;
            const currentId = input.id;
            
            if (currentName && currentName.startsWith('socio')) {
                const fieldType = currentName.split('_')[1];
                input.name = `socio${newIndex}_${fieldType}`;
                input.id = `socio${newIndex}_${fieldType}`;
            }
        });
        
        // Atualizar labels
        const labels = item.querySelectorAll('label');
        labels.forEach(label => {
            const currentFor = label.getAttribute('for');
            if (currentFor && currentFor.startsWith('socio')) {
                const fieldType = currentFor.split('_')[1];
                label.setAttribute('for', `socio${newIndex}_${fieldType}`);
            }
        });
        
        // Atualizar botão remover
        const removeBtn = item.querySelector('.remove-socio');
        if (removeBtn) {
            removeBtn.setAttribute('data-socio-index', newIndex);
        }
    });
    
    socioCounter = socioItems.length;
}

// Função para aplicar máscara de CPF
function applyCpfMask() {
    document.querySelectorAll('.cpf-mask').forEach(input => {
        input.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length <= 11) {
                value = value.replace(/^(\d{3})(\d)/, '$1.$2');
                value = value.replace(/^(\d{3})\.(\d{3})(\d)/, '$1.$2.$3');
                value = value.replace(/\.(\d{3})(\d)/, '.$1-$2');
            }
            e.target.value = value;
        });
    });
}

// Função para controlar responsável legal (apenas um pode ser selecionado)
function setupRespLegalControl() {
    document.querySelectorAll('.resp-legal-select').forEach(select => {
        select.addEventListener('change', function() {
            if (this.value === 'Sim') {
                // Desmarcar todos os outros
                document.querySelectorAll('.resp-legal-select').forEach(otherSelect => {
                    if (otherSelect !== this) {
                        otherSelect.value = 'Não';
                    }
                });
            }
        });
    });
}

// Inicializar funcionalidades
document.addEventListener('DOMContentLoaded', function() {
    applyCpfMask();
    applyPhoneMasks();
    setupRespLegalControl();
    updateRemoveButtons();
});

// Função para aplicar máscaras de telefone
function applyPhoneMasks() {
    // Telefones fixos
    document.querySelectorAll('#telefoneFixo, #telefoneContador').forEach(input => {
        input.addEventListener('input', function() {
            let value = this.value.replace(/\D/g, '');
            if (value.length <= 10) {
                value = value.replace(/(\d{2})(\d{4})(\d{4})/, '($1) $2-$3');
            }
            this.value = value;
        });
    });
    
    // Telefones celulares
    document.querySelectorAll('#telefoneCelular, #whatsapp').forEach(input => {
        input.addEventListener('input', function() {
            let value = this.value.replace(/\D/g, '');
            if (value.length <= 11) {
                value = value.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
            }
            this.value = value;
        });
    });
}

// ===== FIM DA FUNCIONALIDADE DOS SÓCIOS =====

// Validação do formulário
(function() {
    'use strict';
    window.addEventListener('load', function() {
        var forms = document.getElementsByClassName('needs-validation');
        var validation = Array.prototype.filter.call(forms, function(form) {
            form.addEventListener('submit', function(event) {
                if (form.checkValidity() === false) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                form.classList.add('was-validated');
            }, false);
        });
    }, false);
})();

// Formatação de CNPJ
document.getElementById('cnpj').addEventListener('input', function(e) {
    let value = e.target.value.replace(/\D/g, '');
    if (value.length <= 14) {
        value = value.replace(/^(\d{2})(\d)/, '$1.$2');
        value = value.replace(/^(\d{2})\.(\d{3})(\d)/, '$1.$2.$3');
        value = value.replace(/\.(\d{3})(\d)/, '.$1/$2');
        value = value.replace(/(\d{4})(\d)/, '$1-$2');
    }
    e.target.value = value;
});

// Formatação de telefones
function formatPhone(input) {
    let value = input.value.replace(/\D/g, '');
    if (value.length <= 11) {
        if (value.length <= 10) {
            value = value.replace(/^(\d{2})(\d)/, '($1) $2');
            value = value.replace(/(\d{4})(\d)/, '$1-$2');
        } else {
            value = value.replace(/^(\d{2})(\d)/, '($1) $2');
            value = value.replace(/(\d{5})(\d)/, '$1-$2');
        }
    }
    input.value = value;
}

document.getElementById('telefoneFixo').addEventListener('input', function(e) {
    formatPhone(e.target);
});

document.getElementById('telefoneCelular').addEventListener('input', function(e) {
    formatPhone(e.target);
});

// Confirmação de exclusão
function confirmDelete(clientId, clientName) {
    const modal = new bootstrap.Modal(document.getElementById('deleteModal'));
    modal.show();
}

// Indicador de loading no submit
document.getElementById('clientForm').addEventListener('submit', function() {
    const submitBtn = this.querySelector('button[type="submit"]');
    const originalText = submitBtn.innerHTML;
    submitBtn.innerHTML = '<span class="spinner"></span> Salvando...';
    submitBtn.disabled = true;
    
    // Simular delay para mostrar loading
    setTimeout(() => {
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
    }, 2000);
});
</script>
{% endblock %}
